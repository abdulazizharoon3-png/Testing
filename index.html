<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>New Year Surprise ğŸ</title>

<style>
html,body{
  margin:0; padding:0; overflow:hidden;
  height:100%; width:100%;
  font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  background:radial-gradient(circle at top,#1a1a2e,#0c0c0c);
  color:white;
}
.screen{
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  justify-content:center; align-items:center;
  opacity:0; pointer-events:none;
  transform:scale(0.96);
  transition:opacity .9s ease,transform .9s ease;
}
.screen.active{opacity:1;pointer-events:auto;transform:scale(1);}
h1,h2{
  max-width:90%;
  text-align:center;
  line-height:1.5;
}
h2{font-size:1.3rem;}
button{
  margin-top:28px;
  padding:14px 36px;
  font-size:1.1rem;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#ff4ecd,#7a5cff);
  color:white;
  cursor:pointer;
  opacity:0;
  transform:translateY(10px);
  transition:opacity .6s ease,transform .6s ease;
}
button.show{opacity:1;transform:translateY(0);}
input{
  padding:14px;
  font-size:1rem;
  border-radius:12px;
  border:2px solid rgba(255,255,255,.6);
  background:transparent;
  color:white;
  text-align:center;
}
canvas{
  position:absolute;
  inset:0;
  pointer-events:none;
}
#giftIcon{
  font-size:64px;
  animation:float 2s ease-in-out infinite;
  cursor:pointer;
}
@keyframes float{
  0%,100%{transform:translateY(0);}
  50%{transform:translateY(-16px);}
}
.fadeText{
  opacity:0;
  animation:fadeUp 1.2s ease forwards;
}
@keyframes fadeUp{
  to{opacity:1;transform:translateY(-6px);}
}
</style>
</head>

<body>

<canvas id="fx"></canvas>

<div id="start" class="screen active">
  <h1 class="fadeText">ğŸ‰ Ready for a Surprise?</h1>
  <button class="show" onclick="goName()">Start</button>
</div>

<div id="name" class="screen">
  <h2 class="fadeText">Enter Your Name ğŸ’«</h2>
  <input id="username" placeholder="Your Name">
  <button class="show" onclick="checkName()">Next</button>
</div>

<div id="pages" class="screen"></div>

<div id="giftScreen" class="screen">
  <div id="giftIcon">ğŸ</div>
</div>

<div id="genericFinal" class="screen">
  <h2 class="fadeText">
ğŸŒŸ â€œAs the old year folds its final page, may your heart be lighter and your dreams soar higher.<br><br>
May laughter follow you like sunlight, and may every step you take in the new year be guided by hope, joy, and unforgettable moments.<br><br>
Hereâ€™s to 365 new chances, countless smiles, and the magic of new beginnings.<br><br>
Happy New Year! ğŸ†âœ¨â€
  </h2>
</div>

<script>
/* ===== Canvas FX ===== */
const canvas=document.getElementById("fx");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;canvas.height=innerHeight;

let particles=[];
function burst(x,y){
  for(let i=0;i<40;i++){
    particles.push({
      x,y,
      vx:(Math.random()-.5)*4,
      vy:(Math.random()-.5)*4,
      life:1,
      c:`hsl(${Math.random()*360},100%,60%)`
    });
  }
}
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  particles.forEach(p=>{
    ctx.fillStyle=p.c;
    ctx.globalAlpha=p.life;
    ctx.fillRect(p.x,p.y,3,3);
    p.x+=p.vx;p.y+=p.vy;p.life-=.02;
  });
  particles=particles.filter(p=>p.life>0);
  requestAnimationFrame(animate);
}
animate();

/* ===== Screen helpers ===== */
function show(id){
  document.querySelectorAll(".screen").forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}
function goName(){show("name");}

/* ===== Flows ===== */
const aribaMessages=[/* unchanged */];
const habibaMessages=[/* unchanged */];

let index=0,habibaRun=0;

function checkName(){
  let n=username.value.trim().toLowerCase();
  if(n==="ariba"){startFlow(aribaMessages,false);}
  else if(n==="habiba"){startFlow(habibaMessages,true);}
  else{show("giftScreen");}
}

function startFlow(arr,runaway){
  index=0;
  show("pages");
  nextPage(arr,runaway);
}

function nextPage(arr,runaway){
  const c=document.getElementById("pages");
  c.innerHTML="";
  let h=document.createElement("h2");
  h.className="fadeText";
  h.innerHTML=arr[index];
  c.appendChild(h);

  let b=document.createElement("button");
  b.textContent="Next";
  setTimeout(()=>b.classList.add("show"),1200);

  if(runaway && habibaRun<3){
    b.onmouseover=()=>{
      habibaRun++;
      b.style.position="absolute";
      b.style.left=Math.random()*70+"%";
      b.style.top=Math.random()*70+"%";
    };
  }

  b.onclick=()=>{
    index++;
    burst(innerWidth/2,innerHeight/2);
    if(index<arr.length) nextPage(arr,runaway);
    else if(!runaway) burst(innerWidth/2,innerHeight/3);
  };

  c.appendChild(b);
}

/* ===== Gift ===== */
giftIcon.onclick=()=>{
  burst(innerWidth/2,innerHeight/2);
  setTimeout(()=>show("genericFinal"),900);
};
</script>
</body>
</html>
